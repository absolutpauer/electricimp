<html>
<head>
</head>

<body>

<h4>What is your agent's url?</h4>
<form name="url">
https://agent.electricimp.com/<input type="text" name="agentUrl" placeholder="UpyYpRLmBB7m">
</form>

<h4>Imp Inputs:</h4>
<form name="leds">
Lonely Red LED: <input type="radio" name="led" value="0" checked>Off
                <input type="radio" name="led" value="1">On<br>
Set the RGB LED: <input type="color" name="rgb">  (Chrome/Opera use color input, other browsers format as "#XXXXXX", where X is 0-9, a-f, or A-F.) <br>
How long should the LEDs stay on? <input type="text" name="timer" value="10">seconds<br>
Your name? So we know who to blame! <input type="text" name="user" placeholder="Your name here"><br>
<br>
<input type="button" value="Update!" onClick=sendRequest()>
</form>

</body>

<script language="javascript">

function sendRequest() {
    ledForm = document.leds;
    urlForm = document.url;
    
    url = "https://agent.electricimp.com/" + urlForm.agentUrl.value;

    leds = document.getElementsByName("led");
    ledValue = "0";

    for (i = 0; i < leds.length; i++)
    {
    	if (leds[i].checked)
            ledValue = leds[i].value;
    }

    url += "?led=" + encodeURIComponent(ledValue);
    url += "&rgb=" + encodeURIComponent(document.leds.rgb.value);
    url += "&timer=" + encodeURIComponent(document.leds.timer.value);
    url += "&user=" + encodeURIComponent(document.leds.user.value);

    request = new XMLHttpRequest();
    request.open("GET", url, false);
    request.send(null);
}

</script>

</html>
